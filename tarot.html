<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>å¡”ç½—ç‰ŒæŠ½å–ä½“éªŒ</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f5f5f5;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .container {
            max-width: 800px;
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .card-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        .card {
            width: 180px;
            height: 250px;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            transition: transform .3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-front {
            background: linear-gradient(135deg, #8b5a2b, #6b4f22);
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 3px solid #d4a762;
            box-shadow: 0 4px 8px rgba(0,0,0,.2);
        }
        .card-back {
            background: #fff;
            border: 2px solid #ddd;
            padding: 15px;
            text-align: left;
            display: none;
            overflow-y: auto;
        }
        .card-back img {
            width: 100%;
            max-height: 130px;
            object-fit: contain;
            border-radius: 5px;
            margin-bottom: 10px;
            display: block;
        }
        .card-number {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .card-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #8b5a2b;
        }
        .card-text {
            font-size: 14px;
            line-height: 1.4;
        }
        .btn {
            background: #4caf50;
            color: #fff;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: background .3s;
        }
        .btn:hover {
            background: #45a049;
        }
        .interpretation {
            margin-top: 40px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            text-align: left;
            display: none;
        }
        .instruction {
            font-size: 18px;
            margin: 20px 0;
            color: #555;
        }
        .footer {
            margin-top: 30px;
            color: #888;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® å¡”ç½—ç‰ŒæŠ½å–ä½“éªŒ</h1>
        <p class="subtitle">æ¢ç´¢è¿‡å»ã€ç°åœ¨ä¸æœªæ¥çš„èƒ½é‡çŠ¶æ€</p >
        <div class="instruction" id="instruction">è¯·æŒ‰é¡ºåºç‚¹å‡»ä¸‰å¼ ç‰Œï¼ˆå…ˆç‚¹å‡»"è¿‡å»"ï¼Œç„¶å"ç°åœ¨"ï¼Œæœ€å"æœªæ¥"ï¼‰</div>
        <div class="card-container">
            <div class="card card-front" id="card1" onclick="flipCard(1)">
                <div class="card-number">1</div>
                <div style="font-size:20px;margin-top:20px">è¿‡å»</div>
                <div style="margin-top:10px;font-size:14px">ç‚¹å‡»ç¿»å¼€</div>
            </div>
            <div class="card card-front" id="card2" onclick="flipCard(2)">
                <div class="card-number">2</div>
                <div style="font-size:20px;margin-top:20px">ç°åœ¨</div>
                <div style="margin-top:10px;font-size:14px">ç‚¹å‡»ç¿»å¼€</div>
            </div>
            <div class="card card-front" id="card3" onclick="flipCard(3)">
                <div class="card-number">3</div>
                <div style="font-size:20px;margin-top:20px">æœªæ¥</div>
                <div style="margin-top:10px;font-size:14px">ç‚¹å‡»ç¿»å¼€</div>
            </div>
        </div>
        <div class="card card-back" id="card1-back">
            < img id="card1-image" src alt="è¿‡å»ç‰Œé¢">
            <div class="card-title" id="card1-title"></div>
            <div class="card-text" id="card1-text"></div>
        </div>
        <div class="card card-back" id="card2-back">
            < img id="card2-image" src alt="ç°åœ¨ç‰Œé¢">
            <div class="card-title" id="card2-title"></div>
            <div class="card-text" id="card2-text"></div>
        </div>
        <div class="card card-back" id="card3-back">
            < img id="card3-image" src alt="æœªæ¥ç‰Œé¢">
            <div class="card-title" id="card3-title"></div>
            <div class="card-text" id="card3-text"></div>
        </div>
        <div class="interpretation" id="interpretation">
            <h3>âœ¨ æ•´ä½“è§£è¯»</h3>
            <p id="interpretation-text"></p >
            <button class="btn" onclick="returnToSurvey()">è¿”å›é—®å·ç»§ç»­</button>
        </div>
        <div class="footer">
            <p>æ³¨ï¼šæœ¬ä½“éªŒä»…ç”¨äºå¿ƒç†å­¦ç ”ç©¶ï¼Œç»“æœä¸ä»£è¡¨çœŸå®é¢„æµ‹</p >
        </div>
    </div>
    <script>
        // é˜²æ­¢å³é”®èœå•å’Œå¼€å‘è€…å·¥å…·
        (function(){
            document.addEventListener('contextmenu', function(e){
                e.preventDefault();
                alert('ä¸ºä¿éšœä½“éªŒå®Œæ•´æ€§ï¼Œæ­¤é¡µé¢ç¦ç”¨å³é”®èœå•ã€‚');
            });
            
            document.addEventListener('keydown', function(e){
                if(e.key === 'F12' || 
                   (e.ctrlKey && e.shiftKey && (['I','J','C'].includes(e.key))) || 
                   (e.metaKey && e.altKey && e.key === 'I')) {
                    e.preventDefault();
                    alert('ä¸ºä¿éšœä½“éªŒå®Œæ•´æ€§ï¼Œæ­¤é¡µé¢ç¦ç”¨å¼€å‘è€…å·¥å…·å¿«æ·é”®ã€‚');
                }
            });
            
            document.addEventListener('keydown', function(e){
                if(e.ctrlKey && e.key === 'u') e.preventDefault();
            });
        })();

        // è·å–URLå‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id') || 'æœªæŒ‡å®š';
        const group = urlParams.get('group') || 'positive';

        // å¡ç‰‡æ•°æ®é›†
        const cardSets = {
            positive: {
                cards: [
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/bei.jpg?raw=true", title: "è¿‡å»ï¼šåœ£æ¯ä¹ï¼ˆæ­£ä½ï¼‰", text: "è¿™å¼ ç‰Œä»£è¡¨è¿‡å»é˜¶æ®µï¼Œä½ åœ¨ç›¸å…³é¢†åŸŸå·²ç»ç§¯ç´¯äº†ä¸€å®šçš„åŸºç¡€ä¸æ»¡è¶³æ„Ÿã€‚ä¹‹å‰çš„åŠªåŠ›ä¸ºä½ å¸¦æ¥äº†ç§¯æçš„åé¦ˆå’Œæˆå°±æ„Ÿï¼Œè¿™ä¸ºç°åœ¨çš„å‘å±•å¥ å®šäº†è‰¯å¥½çš„æ ¹åŸºã€‚"},
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/yang.jpg?raw=true", title: "ç°åœ¨ï¼šå¤ªé˜³ï¼ˆæ­£ä½ï¼‰", text: "è¿™å¼ ç‰Œæ˜¾ç¤ºä½ ç›®å‰æ­£å¤„äºå……æ»¡æ´»åŠ›ä¸å…‰æ˜çš„é˜¶æ®µã€‚äº‹æƒ…è¿›å±•é¡ºåˆ©ï¼Œå‰æ™¯æ˜æœ—ï¼Œä½ æ‹¥æœ‰è¶³å¤Ÿçš„èƒ½é‡å’Œä¹è§‚å¿ƒæ€å»æ¨è¿›ç›®æ ‡ã€‚è¿™æ˜¯ä¸€ä¸ªé€‚åˆç§¯æè¡ŒåŠ¨ã€å±•ç°è‡ªæˆ‘èƒ½åŠ›çš„å¥½æ—¶æœºã€‚"},
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/jie.jpg?raw=true", title: "æœªæ¥ï¼šä¸–ç•Œï¼ˆæ­£ä½ï¼‰", text: "è¿™å¼ ç‰Œé¢„ç¤ºæœªæ¥ä½ å°†è¾¾æˆåœ†æ»¡ä¸æ•´åˆã€‚ä½ çš„ç›®æ ‡æœ‰æœ›é¡ºåˆ©å®ç°ï¼Œå¹¶è·å¾—åº”æœ‰çš„å›æŠ¥ä¸æˆå°±æ„Ÿã€‚è¿™æ˜¯ä¸€ä¸ªå……æ»¡å’Œè°ä¸æˆåŠŸçš„æœªæ¥æ„¿æ™¯ã€‚"}
                ],
                summary: "ç»¼åˆæ¥çœ‹ï¼Œä½ çš„ç›®æ ‡åœ¨è¿‡å»å·²æ‰“ä¸‹è‰¯å¥½åŸºç¡€ï¼Œç°åœ¨æ­£å¤„äºç§¯æå‘å±•çš„é˜¶æ®µï¼Œæœªæ¥å°†è¿æ¥åœ†æ»¡æˆåŠŸã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç§¯æçš„ä¿¡å·ï¼Œé¼“åŠ±ä½ ä¿æŒä¿¡å¿ƒï¼Œç»§ç»­åŠªåŠ›ï¼ŒæŠ“ä½çœ¼å‰çš„æœºé‡ã€‚"
            },
            negative: {
                cards: [
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/jian.jpg?raw=true", title: "è¿‡å»ï¼šå®å‰‘äº”ï¼ˆé€†ä½ï¼‰", text: "è¿™å¼ ç‰Œåæ˜ è¿‡å»é˜¶æ®µï¼Œä½ åœ¨ç›¸å…³é¢†åŸŸå¯èƒ½ç»å†äº†ä¸€äº›å†²çªæˆ–æŒ«è´¥ã€‚è¿™äº›ç»å†å¯èƒ½è®©ä½ æ„Ÿåˆ°å›°æƒ‘æˆ–å¤±è½ï¼Œå¯¹ç›®æ ‡çš„æ¨è¿›äº§ç”Ÿäº†ä¸€å®šçš„é˜»ç¢ã€‚"},
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/yue.jpg?raw=true", title: "ç°åœ¨ï¼šæœˆäº®ï¼ˆé€†ä½ï¼‰", text: "è¿™å¼ ç‰Œæ˜¾ç¤ºä½ ç›®å‰å¯èƒ½å¤„äºä¸€ç§ä¸ç¡®å®šæˆ–ç„¦è™‘çš„çŠ¶æ€ã€‚äº‹æƒ…çš„å‘å±•æ–¹å‘ä¸å¤Ÿæ¸…æ™°ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›æ½œåœ¨çš„é˜»ç¢æˆ–è¯¯è§£ï¼Œè®©ä½ æ„Ÿåˆ°å›°æƒ‘ä¸ä¸å®‰ã€‚"},
                    {imageUrl: "https://github.com/aye1314520/tarot-experiment1/blob/main/image/ta.jpg?raw=true", title: "æœªæ¥ï¼šå¡”ï¼ˆé€†ä½ï¼‰", text: "è¿™å¼ ç‰Œé¢„ç¤ºæœªæ¥å¯èƒ½ä¼šé‡åˆ°çªå¦‚å…¶æ¥çš„å˜åŒ–æˆ–æŒ‘æˆ˜ã€‚è™½ç„¶è¿™å¯èƒ½å¸¦æ¥ä¸€å®šçš„å‹åŠ›ï¼Œä½†ä¹Ÿæé†’ä½ éœ€è¦æå‰åšå¥½å‡†å¤‡ï¼Œçµæ´»åº”å¯¹å¯èƒ½çš„å˜åŒ–ã€‚"}
                ],
                summary: "æ•´ä½“æ¥çœ‹ï¼Œä½ çš„ç›®æ ‡åœ¨è¿‡å»é‡åˆ°äº†ä¸€äº›é˜»ç¢ï¼Œç°åœ¨æ­£å¤„åœ¨ä¸€ç§ä¸ç¡®å®šçš„çŠ¶æ€ä¸­ï¼Œæœªæ¥åˆ™éœ€è¦è­¦æƒ•å¯èƒ½çš„æŒ‘æˆ˜ä¸å˜åŒ–ã€‚è¿™æ˜¯ä¸€ä¸ªéœ€è¦ä½ è°¨æ…æ€è€ƒã€ç¨³æ‰ç¨³æ‰“çš„é˜¶æ®µï¼Œå»ºè®®å¤šåšä¸€äº›å‡†å¤‡ä¸è§„åˆ’ã€‚"
            }
        };

        // å…¨å±€å˜é‡
        let flippedCards = 0;
        const currentSet = cardSets[group];

        // ç¿»è½¬å¡ç‰‡å‡½æ•° - å·²ä¿®å¤ç©ºå€¼æ£€æŸ¥
        window.flipCard = function(cardNumber) {
            // æ£€æŸ¥æ˜¯å¦æŒ‰é¡ºåºç‚¹å‡»
            if (cardNumber !== flippedCards + 1) {
                alert(`è¯·å…ˆç¿»å¼€ç¬¬ ${flippedCards + 1} å¼ ç‰Œ`);
                return;
            }

            // è·å–ç›¸å…³å…ƒç´ 
            const frontCard = document.getElementById(`card${cardNumber}`);
            const backCard = document.getElementById(`card${cardNumber}-back`);
            const cardImage = document.getElementById(`card${cardNumber}-image`);
            const cardTitle = document.getElementById(`card${cardNumber}-title`);
            const cardText = document.getElementById(`card${cardNumber}-text`);

            // æ£€æŸ¥æ‰€æœ‰å¿…éœ€çš„å…ƒç´ æ˜¯å¦å­˜åœ¨
            if (!frontCard || !backCard || !cardImage || !cardTitle || !cardText) {
                console.error("æ‰¾ä¸åˆ°å¡ç‰‡å…ƒç´ :", {
                    frontCard: `card${cardNumber}`,
                    backCard: `card${cardNumber}-back`,
                    cardImage: `card${cardNumber}-image`,
                    cardTitle: `card${cardNumber}-title`,
                    cardText: `card${cardNumber}-text`
                });
                alert("ç³»ç»Ÿé”™è¯¯ï¼šæ‰¾ä¸åˆ°å¡ç‰‡å…ƒç´ ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚");
                return;
            }

            // è·å–å½“å‰å¡ç‰‡æ•°æ®
            const cardData = currentSet.cards[cardNumber - 1];
            if (!cardData) {
                console.error("æ‰¾ä¸åˆ°å¡ç‰‡æ•°æ®:", cardNumber);
                return;
            }

            try {
                // éšè—æ­£é¢å¡ç‰‡ï¼Œæ˜¾ç¤ºèƒŒé¢å¡ç‰‡
                frontCard.style.display = 'none';
                backCard.style.display = 'block';
                
                // è®¾ç½®èƒŒé¢å¡ç‰‡å†…å®¹
                cardImage.src = cardData.imageUrl;
                cardTitle.textContent = cardData.title;
                cardText.textContent = cardData.text;
                
                // æ›´æ–°å·²ç¿»å¼€çš„å¡ç‰‡æ•°
                flippedCards++;
                
                // æ›´æ–°æç¤ºä¿¡æ¯
                const instruction = document.getElementById('instruction');
                if (instruction && flippedCards < 3) {
                    instruction.textContent = `è¯·ç‚¹å‡»ç¬¬ ${flippedCards + 1} å¼ ç‰Œï¼ˆ${flippedCards === 1 ? 'ç°åœ¨' : 'æœªæ¥'}ï¼‰`;
                } else if (instruction && flippedCards === 3) {
                    // æ‰€æœ‰å¡ç‰‡ç¿»å¼€åæ˜¾ç¤ºè§£è¯»
                    setTimeout(() => {
                        const interpretation = document.getElementById('interpretation');
                        const interpretationText = document.getElementById('interpretation-text');
                        
                        if (interpretation && interpretationText) {
                            interpretationText.textContent = currentSet.summary;
                            interpretation.style.display = 'block';
                            instruction.style.display = 'none';
                        }
                    }, 500);
                }
            } catch (error) {
                console.error("ç¿»è½¬å¡ç‰‡æ—¶å‘ç”Ÿé”™è¯¯:", error);
                alert("æ“ä½œå¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚");
            }
        };

        // è¿”å›é—®å·å‡½æ•°
        window.returnToSurvey = function() {
            // ========== ã€ï¼ï¼ï¼å¿…é¡»ä¿®æ”¹ï¼ï¼ï¼ã€‘æ›¿æ¢æˆä½ çš„çœŸå®è§æ•°é—®å·é“¾æ¥ ==========
            const baseUrl = "https://www.credamo.cn/s/ä½ çš„é—®å·ID";
            // =================================================================
            const redirectUrl = `${baseUrl}?user=${userId}&completed=1&source=tarot`;
            
            try {
                window.location.href = redirectUrl;
                setTimeout(() => {
                    alert('å¦‚æœé¡µé¢æ²¡æœ‰è‡ªåŠ¨è·³è½¬ï¼Œè¯·æ‰‹åŠ¨è¿”å›é—®å·ç»§ç»­ä½œç­”');
                }, 1000);
            } catch (error) {
                console.error("è·³è½¬å¤±è´¥:", error);
                alert("è·³è½¬å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥è®¿é—®ï¼š" + redirectUrl);
            }
        };
    </script>
</body>
</html>
